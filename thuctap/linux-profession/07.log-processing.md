# 1. Journalctl
## 1.1 Journalctl dùng để làm gì
- Đây là câu lệnh dùng để truy vấn  và hiển thì nhật ký của systemd
- chỉ những người dùng thuộc nhóm `adm` `systemd-journal` mới có thể đọc các log của systemd
- Khi ghi lại nhật ký ta sẽ biết thiết bị đã thay đổi gì hay khi hệ thống gặp lỗi ta có thể tra nhật ký và tìm ra nguyên nhân khắc phục
- Hãy đảm bảo file /etc/systemd/journald.conf như trong hình để nhật ký được ghi liên tục
    ![Alt](/thuctap/anh/Screenshot_519.png)
- vị trí file cấu hình `journalctl` : `/etc/systemd/journald.conf`
- file log được lưu ở :`/var/log/journal`

## 1.2 Sử dụng journalctl để đọc và phân tích Systemd Logs
- Câu lệnh journald cơ bản:
    ```
    journalctl
    ```
    ![Alt](/thuctap/anh/Screenshot_520.png)

- Chỉ xem errors, warnings, vv

    ```
    journalctl -p [err code]
    ```
    - err code:
      - 0: khẩn cấp
      - 1: cảnh báo
      - 2: phê bình
      - 3: errors
      - 4: warning
      - 5: notice
      - 6: info
      - 7: debug
    ![Alt](/thuctap/anh/Screenshot_521.png)
    ![Alt](/thuctap/anh/Screenshot_522.png)

- Xem journal logs cho một thời gian, khoảng thời gian cụ thể
  - Bạn có thể dùng tham số --since với các giá tị như “yesterday”, “today”, “tomorrow”, “now”. Hoặc với khoảng thời gian cụ thể theo định dạng “YYYY-MM-DD HH:MM:SS”
    ```
    journalctl --since "2023-12-04 06:00:00"
    journalctl --since "2023-12-03" --until "2023-12-05 03:00:00"
    journalctl --since yesterday
    journalctl --since 09:00 --until "1 hour ago"
    ```
    ![Alt](/thuctap/anh/Screenshot_523.png)

- Xem journal logs của một serivce, PID
    ```
    journalctl -u [service]
    ```
    ![Alt](/thuctap/anh/Screenshot_524.png)

- Xem journal logs của một user,group

    ```
    id -u [user] / tìm kiếm uid của user
    journalctl _UID=[uid] –since [thời gian]
    ```
    ![Alt](/thuctap/anh/Screenshot_525.png)


# Tài liệu tham khảo

https://www.pdfiles.net/pdf/view/Linux-Notes-For-Professionals

https://cloudzone.vn/su-dung-journalctl-de-doc-va-phan-tich-systemd-logs/